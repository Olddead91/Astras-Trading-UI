<ng-container *transloco="let t; scope: 'instruments-correlation/correlation-chart'">
  <div class="container h-100 d-flex flex-column">
    <div class="header">
      <form [formGroup]="parametersForm" nz-form nzLayout="inline">
        <nz-form-item>
          <nz-form-control>
            <ng-container *transloco="let tTitle; scope: 'instruments'">
              <nz-select
                [nzDropdownMatchSelectWidth]="false"
                [nz-tooltip]="t('instrumentsCorrelationCorrelationChart.parametersForm.targetListLabel')"
                [nzTooltipPlacement]="['top', 'topLeft', 'topRight']"
                formControlName="targetListId"
              >
                <ng-container *ngFor="let list of availableLists$ | async">
                  <nz-option [nzLabel]="tTitle('instruments.' + getTitleTranslationKey(list), {fallback: list.title})"
                             [nzValue]="list.id">
                  </nz-option>
                </ng-container>
              </nz-select>
            </ng-container>
          </nz-form-control>
        </nz-form-item>
        <nz-form-item>
          <nz-form-control>
            <nz-select
              [nzDropdownMatchSelectWidth]="false"
              [nz-tooltip]="t('instrumentsCorrelationCorrelationChart.parametersForm.timeframeLabel')"
              [nzTooltipPlacement]="['top', 'topLeft', 'topRight']"
              formControlName="days"
            >
              <ng-container *ngFor="let timeframe of timeframes">
                <nz-option [nzLabel]="t('instrumentsCorrelationCorrelationChart.parametersForm.timeframeOptions.' + timeframe.key)"
                           [nzValue]="timeframe.value">
                </nz-option>
              </ng-container>
            </nz-select>
          </nz-form-control>
        </nz-form-item>
        <nz-form-item>
          <nz-form-control>
            <nz-select
              [nzDropdownMatchSelectWidth]="false"
              [nz-tooltip]="t('instrumentsCorrelationCorrelationChart.parametersForm.detrendTypeLabel')"
              [nzTooltipPlacement]="['top', 'topLeft', 'topRight']"
              formControlName="detrendType"
            >
              <ng-container *ngFor="let detrendType of detrendTypes">
                <nz-option [nzLabel]="t('instrumentsCorrelationCorrelationChart.parametersForm.detrendTypeOptions.' + detrendType)"
                           [nzValue]="detrendType">
                </nz-option>
              </ng-container>
            </nz-select>
          </nz-form-control>
        </nz-form-item>
      </form>
    </div>
    <div (nzResizeObserve)="sizeChanged($event)" class="overflow-hidden flex-fill mt-10" nzResizeObserver>
      <ng-container *ngrxLet="{loadingStatus: loadingStatus$} as vm">
        <div [id]="figureId" [hidden]="vm.loadingStatus !== loadingStatuses.Success">
        </div>
        <nz-empty
          *ngIf="vm.loadingStatus === loadingStatuses.NoData"
          class="ant-list-empty-text"
          nzNotFoundImage="simple"
        ></nz-empty>
        <p class="text-center" *ngIf="vm.loadingStatus === loadingStatuses.Loading">
          <nz-spin nzSimple></nz-spin>
        </p>
      </ng-container>
    </div>
  </div>
</ng-container>


