+-<div
  (mouseenter)="isActiveOrderBook = true"
  (mouseleave)="isActiveOrderBook = false"
  *ngIf="!shouldShowSettings"
  [style.height]="(contentSize$ | async)?.height + 'px'"
  class="container"
>
  <div class="header">
    <div class="working-volumes">
      <nz-tag
        (click)="selectVol(vol)"
        *ngFor="let vol of workingVolumes"
        [nzColor]="(activeWorkingVolume$ | async) === vol ? 'gold' : 'default'"
        class="working-volume-item"
      >
        {{vol}}
      </nz-tag>
    </div>
    <div class="auto-align-button">
      <nz-tag
        (click)="switchEnableAutoAlign()"
        [nzColor]="(enableAutoAlign$ | async) === true ? 'cyan' : 'default'"
        [nz-tooltip]="'Автоматически выравнивать по спреду'"
        [nzTooltipMouseEnterDelay]="1"
      >
        <span nz-icon nzTheme="outline" nzType="vertical-align-middle"></span>
      </nz-tag>
    </div>
  </div>
  <div #orderBookTableContainer class="order-book-table-container">
    <ng-container>
      <nz-table
        #table
        [nzData]="(orderBookTableData$ | async)!"
        [nzFrontPagination]="false"
        [nzLoading]="isLoading$ | async"
        [nzScroll]="{ y: ((orderBookTableContainerHeight$ | async)! - 5) + 'px' }"
        [nzShowPagination]="false"
        [nzVirtualItemSize]="tableRowHeight"
        [nzVirtualMaxBufferPx]="(orderBookTableContainerHeight$ | async)!"
        [nzVirtualMinBufferPx]="(orderBookTableContainerHeight$ | async)!"
        nzBordered
        nzSize="small"
        nzTableLayout="fixed">
        <tbody>
        <ng-template let-row nz-virtual-scroll>
          <tr (click)="onRowClick($event, row)"
              (contextmenu)="onRowRightClick($event, row)"

              [ngClass]="{
          'row': true,
          'ask-row': row.rowType === rowTypes.Ask,
          'bid-row': row.rowType === rowTypes.Bid,
          'spread-row': row.rowType === rowTypes.Spread,
          'best-row': row.isBest,
          'trade-row': (row.volume ?? 0) > 0
          }">
            <td [ngStyle]='row.getVolumeStyle ? row.getVolumeStyle() : null' class="volume-cell"
                nzAlign="left">{{row.volume}}</td>
            <td class="price-cell" nzAlign="left">{{row.price}}</td>
            <td nzAlign="right">
              <span>{{getCurrentOrdersVolume(row.currentOrders)}}</span>
              <button (click)="cancelRowOrders(row, $event)" *ngIf='row.currentOrders?.length > 0'
                      class="cancel-order-btn" nz-button
                      nzSize="small" nzType="primary">
                <i nz-icon nzType="close-square"></i>
              </button>
            </td>
          </tr>
        </ng-template>
        </tbody>
      </nz-table>
    </ng-container>
  </div>
  <div class="footer">
  </div>

</div>


