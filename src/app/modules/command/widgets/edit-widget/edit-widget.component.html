<div *ngIf="commandContext$ | async as commandContext">
  <nz-modal
    (nzOnCancel)="handleCancel()"
    (nzOnOk)='handleOk()'
    [nzMaskClosable]='false'
    [nzOkLoading]='isBusy'
    [nzVisible]='isVisible$ | async'
    nzCancelText="Отмена"
    nzOkText="Изменить"
    nzTitle="Изменить заявку"
  >
    <ng-container *nzModalContent>
      <ats-command-header [instrument]="commandContext.instrument"></ats-command-header>
      <ats-limit-edit *ngIf='commandContext.commandParameters.type === "limit"' [commandContext]="commandContext"></ats-limit-edit>
      <ats-stop-edit
        *ngIf='commandContext.commandParameters.type === "stop" || commandContext.commandParameters.type === "stoplimit"'
        [commandContext]="commandContext"
      ></ats-stop-edit>
    </ng-container>
  </nz-modal>
</div>
